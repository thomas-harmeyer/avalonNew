{"version":3,"sources":["components/Links.tsx","interfaces/Game.ts","interfaces/Roles.ts","components/Navbar.tsx","components/views/About.tsx","components/context/socket.ts","components/context/GameContext.ts","components/views/SuggestedMissions.tsx","components/views/GameView.tsx","components/views/Join.tsx","components/LobbyNameList.tsx","components/views/Lobby.tsx","components/views/Login.tsx","components/views/Role.tsx","components/views/Settings.tsx","components/views/Welcome.tsx","components/views/ResultView.tsx","components/Merlin.tsx","App.tsx","index.tsx"],"names":["Links","MissionState","Roles","GoodRoles","BadRoles","Navbar","bg","variant","Container","fluid","className","Nav","Row","Col","to","Welcome","Link","Login","Settings","Brand","About","getKnownRoles","user","users","knownRoles","role","_id","Merlin","BadKnight","Assassin","Morgana","Minion","forEach","isBad","push","Percival","MerlinOrMorgana","getUsername","localStorage","getItem","getOpe","ope","socket","io","autoConnect","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","tryConnect","connected","console","log","auth","username","id","Date","now","on","connect","GameContext","createContext","totalPlayers","roles","missions","missionData","state","Suggesting","onMission","passedMissions","failedMissions","hasStarted","SuggestedMissions","loadedMissions","setSelectedUsers","selectedUsers","handleSuggest","handleVote","handlePass","canSuggest","game","useContext","length","Lobby","hasVoted","voteData","userVotes","find","userVote","index","hasPassed","userResults","userResult","areSuggested","suggestedUsers","Table","bordered","map","mission","j","i","suggester","undefined","passed","missionUser","onClick","numOfPlayers","filter","userFilter","selectedUsersTemp","pop","handleSelectUser","data","style","color","numOfFails","Button","Voting","GameView","useState","setPassedMissions","loadedMission","setLoadedMission","lastOnMission","setLastOnMission","setOnMission","error","setError","setCanSuggest","useEffect","a","passedMissionsTemp","missionArray","setData","result","Alert","CloseButton","Card","Body","emit","vote","success","Join","setOpe","InputGroup","FormControl","placeholder","onChange","event","setItem","storeOpe","target","value","LobbyNameList","props","xs","text","settingsHaveBeenUpdated","sessionStorage","redirectToSettings","setRedirectToSettings","redirectToGame","setRedirectToGame","Role","restartGame","startGame","group","groupEnd","Spinner","animation","setUsername","redirect","setRedirect","removeItem","disconnect","Form","Group","controlId","Label","Control","storeUsername","knownUsers","setKnownUsers","Game","RolesArray","ButtonGroup","includes","roleFilter","setRole","totalPlayer","count","ResultView","isGood","selectedUser","setSelectedUser","Result","isAssassin","goodUsers","App","setGame","path","component","exact","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.564f319c.chunk.js","sourcesContent":["enum Links {\r\n  Welcome = \"/avalonNew\",\r\n  Join = \"/avalonNew/join\",\r\n  Lobby = \"/avalonNew/lobby\",\r\n  Settings = \"/avalonNew/settings\",\r\n  Game = \"/avalonNew/game\",\r\n  About = \"/avalonNew/about\",\r\n  Login = \"/avalonNew/login\",\r\n  Role = \"/avalonNew/role\",\r\n  Merlin = \"/avalonNew/merlin\",\r\n  Result = \"/avalonNew/result\",\r\n}\r\nexport default Links;\r\n","import User from \"../interfaces/User\";\r\nimport Mission from \"./Mission\";\r\nimport Roles from \"./Roles\";\r\n\r\ninterface Game {\r\n  missions: Mission[][];\r\n  users: User[];\r\n  usersToRemove?: User[];\r\n  ope: string;\r\n  missionData: GameMissionMetadata;\r\n  roles: Roles[];\r\n  totalPlayers: number;\r\n  hasStarted: boolean;\r\n  result?: boolean;\r\n}\r\n\r\nexport interface GameMissionMetadata {\r\n  state: MissionState;\r\n  onMission: number;\r\n  passedMissions: number;\r\n  failedMissions: number;\r\n  result?: boolean;\r\n}\r\n\r\nexport enum MissionState {\r\n  Suggesting = \"suggesting\",\r\n  Voting = \"voting\",\r\n  onMission = \"onMission\",\r\n}\r\nexport default Game;\r\n","import User from \"./User\";\r\n\r\nexport enum Roles {\r\n  GoodKnight = \"Good Knight\",\r\n  BadKnight = \"Bad Knight\",\r\n  Assassin = \"Assassin\",\r\n  Merlin = \"Merlin\",\r\n  Percival = \"Percival\",\r\n  Morgana = \"Morgana\",\r\n  Minion = \"Minion\",\r\n  MerlinOrMorgana = \"Merlin or Morgana\",\r\n}\r\n\r\nexport enum GoodRoles {\r\n  GoodKnight = \"Good Knight\",\r\n  Merlin = \"Merlin\",\r\n  Percival = \"Percival\",\r\n}\r\n\r\nexport enum BadRoles {\r\n  BadKnight = \"Bad Knight\",\r\n  Morgana = \"Morgana\",\r\n  Minion = \"Minion\",\r\n}\r\n\r\nexport function getKnownRoles(user: User | undefined, users: User[]) {\r\n  if (!user) {\r\n    return [];\r\n  }\r\n  const knownRoles: User[] = [];\r\n  const role = user.role;\r\n  const _id = user._id;\r\n  if (\r\n    role === Roles.Merlin ||\r\n    role === Roles.BadKnight ||\r\n    role === Roles.Assassin ||\r\n    role === Roles.Morgana ||\r\n    role === Roles.Minion\r\n  ) {\r\n    users.forEach((user: User) => {\r\n      if (_id !== user._id && isBad(user)) {\r\n        knownRoles.push(user);\r\n      }\r\n    });\r\n  } else if (role === Roles.Percival) {\r\n    users.forEach((user: User) => {\r\n      if (\r\n        _id !== user._id &&\r\n        (user.role === Roles.Merlin || user.role === Roles.Morgana)\r\n      ) {\r\n        user.role = Roles.MerlinOrMorgana;\r\n        knownRoles.push(user);\r\n      }\r\n    });\r\n  }\r\n  return knownRoles;\r\n}\r\n\r\nexport function isBad(user: User) {\r\n  const role = user.role;\r\n  return (\r\n    role === Roles.BadKnight ||\r\n    role === Roles.Assassin ||\r\n    role === Roles.Morgana\r\n  );\r\n}\r\n\r\nexport default Roles;\r\n","import Col from \"react-bootstrap/Col\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport BootstrapNavbar from \"react-bootstrap/Navbar\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport { FaCog } from \"react-icons/fa\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport Links from \"./Links\";\r\n\r\nconst Navbar = () => {\r\n  return (\r\n    <BootstrapNavbar bg=\"dark\" variant=\"dark\">\r\n      <Container fluid className=\"justify-content-end\">\r\n        <Nav className=\"me-auto\">\r\n          <Row>\r\n            <Col>\r\n              <LinkContainer to={Links.Welcome}>\r\n                <Nav.Link>Home</Nav.Link>\r\n              </LinkContainer>\r\n            </Col>\r\n          </Row>\r\n        </Nav>\r\n        <Nav>\r\n          <LinkContainer to={Links.Login}>\r\n            <Nav.Link>Login</Nav.Link>\r\n          </LinkContainer>\r\n          <LinkContainer to={Links.Settings}>\r\n            <BootstrapNavbar.Brand>\r\n              <Row>\r\n                <Col>\r\n                  <FaCog />\r\n                </Col>\r\n              </Row>\r\n            </BootstrapNavbar.Brand>\r\n          </LinkContainer>\r\n        </Nav>\r\n      </Container>\r\n    </BootstrapNavbar>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import { Link } from \"react-router-dom\";\r\nimport Links from \"../Links\";\r\n\r\nconst About = () => {\r\n  return (\r\n    <div>\r\n      <h4>Version 1.0.0</h4>\r\n      <Link to={Links.Welcome}>Go Back</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","import io from \"socket.io-client\";\r\n\r\nconst link = \"https://reactalon-v9t9j.ondigitalocean.app/lobby\";\r\n// const link = \"http://10.42.64.47:4000/lobby\";\r\nexport function getUsername() {\r\n  return localStorage.getItem(\"username\");\r\n}\r\n\r\nexport function getOpe(): string {\r\n  const ope = localStorage.getItem(\"ope\");\r\n  if (ope !== null) return ope;\r\n  else return \"ope\";\r\n}\r\n\r\nexport const socket = io(link, {\r\n  autoConnect: false,\r\n  reconnection: true,\r\n  reconnectionDelay: 1000,\r\n  reconnectionDelayMax: 5000,\r\n  reconnectionAttempts: 5,\r\n});\r\n\r\nexport function tryConnect() {\r\n  if (!socket.connected) {\r\n    console.log(\"try connecting\");\r\n    if (getUsername() && getOpe()) {\r\n      socket.auth = {\r\n        username: getUsername(),\r\n        id: `${Date.now()}`,\r\n        ope: getOpe(),\r\n      };\r\n      socket.on(\"connected\", () => {\r\n        console.log(\"connected\");\r\n      });\r\n      socket.connect();\r\n    }\r\n  }\r\n}\r\n\r\nexport function reconnect() {\r\n  socket.disconnect();\r\n  tryConnect();\r\n}\r\ntryConnect();\r\n\r\nexport default socket;\r\n","import { createContext } from \"react\";\r\nimport Game, { MissionState } from \"../../interfaces/Game\";\r\nimport Roles from \"../../interfaces/Roles\";\r\nimport { getOpe } from \"./socket\";\r\n\r\nexport const GameContext = createContext({\r\n  ope: getOpe(),\r\n  users: [],\r\n  totalPlayers: 0,\r\n  roles: [Roles.Merlin, Roles.Percival, Roles.Assassin, Roles.Morgana],\r\n  missions: [],\r\n  missionData: {\r\n    state: MissionState.Suggesting,\r\n    onMission: 0,\r\n    passedMissions: 0,\r\n    failedMissions: 0,\r\n  },\r\n  hasStarted: false,\r\n} as Game);\r\n\r\nexport default GameContext;\r\n","import { useContext } from \"react\";\r\nimport { Button, Col, Row, Table } from \"react-bootstrap\";\r\nimport {\r\n  FaCheck,\r\n  FaQuestion,\r\n  FaThumbsDown,\r\n  FaThumbsUp,\r\n  FaTimes,\r\n} from \"react-icons/fa\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { MissionState } from \"../../interfaces/Game\";\r\nimport Mission, { UserVote } from \"../../interfaces/Mission\";\r\nimport User from \"../../interfaces/User\";\r\nimport GameContext from \"../context/GameContext\";\r\nimport { getUsername } from \"../context/socket\";\r\nimport Links from \"../Links\";\r\n\r\ntype SuggestedMissionProps = {\r\n  loadedMissions: Mission[];\r\n  setSelectedUsers: React.Dispatch<React.SetStateAction<User[]>>;\r\n  selectedUsers: User[];\r\n  handleSuggest: () => void;\r\n  handleVote: (vote: boolean) => void;\r\n  handlePass: (success: boolean) => void;\r\n  onMission: number;\r\n  canSuggest: boolean;\r\n};\r\n\r\nconst SuggestedMissions = ({\r\n  loadedMissions,\r\n  setSelectedUsers,\r\n  selectedUsers,\r\n  handleSuggest,\r\n  handleVote,\r\n  handlePass,\r\n  onMission,\r\n  canSuggest,\r\n}: SuggestedMissionProps) => {\r\n  console.log(\"on mission \" + onMission);\r\n  const game = useContext(GameContext);\r\n  console.log(game);\r\n  if (game.missions.length === 0) {\r\n    return <Redirect to={Links.Lobby} />;\r\n  }\r\n\r\n  const hasVoted = game.missions[game.missionData.onMission][\r\n    game.missions[game.missionData.onMission].length - 1\r\n  ].voteData?.userVotes.find((userVote, index) => {\r\n    return userVote.user._id === getUsername();\r\n  })\r\n    ? true\r\n    : false;\r\n  const hasPassed = game.missions[game.missionData.onMission][\r\n    game.missions[game.missionData.onMission].length - 1\r\n  ].userResults.find((userResult, index) => {\r\n    return userResult.user._id === getUsername();\r\n  })\r\n    ? true\r\n    : false;\r\n  const areSuggested = loadedMissions[onMission].suggestedUsers.find(\r\n    (user, index) => {\r\n      return user._id === getUsername();\r\n    }\r\n  )\r\n    ? true\r\n    : false;\r\n\r\n  function handleSelectUser(user: User, numOfPlayers: number) {\r\n    if (game.missionData.state === MissionState.Suggesting && canSuggest)\r\n      if (\r\n        selectedUsers.filter((userFilter: User) => {\r\n          return userFilter._id === user._id;\r\n        }).length > 0\r\n      ) {\r\n        setSelectedUsers((selectedUsers) =>\r\n          selectedUsers.filter((userFilter: User) => {\r\n            return userFilter._id !== user._id;\r\n          })\r\n        );\r\n      } else {\r\n        if (selectedUsers.length < numOfPlayers) {\r\n          setSelectedUsers((selectedUsers) => [...selectedUsers, user]);\r\n        } else {\r\n          let selectedUsersTemp = selectedUsers;\r\n          selectedUsersTemp.pop();\r\n          setSelectedUsers([...selectedUsersTemp, user]);\r\n        }\r\n      }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <Table bordered className=\"\">\r\n            <thead>\r\n              <tr key={\"loadedMission\"}>\r\n                <td>User</td>\r\n                {loadedMissions.map((mission: Mission, j: number) => (\r\n                  <td key={\"suggestedMissions:\" + j}>{j + 1}</td>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {game.users.map((user: User, i: number) => (\r\n                <tr key={\"user\" + i}>\r\n                  <td\r\n                    className={\r\n                      game.missions[onMission][\r\n                        game.missions[onMission].length - 1\r\n                      ].suggester?._id === user._id\r\n                        ? \"bg-warning\"\r\n                        : \"\"\r\n                    }\r\n                  >\r\n                    {user.username}\r\n                  </td>\r\n                  {loadedMissions.map((mission: Mission, j) => (\r\n                    <td\r\n                      key={\"suggestedMissions2:\" + j}\r\n                      className={\r\n                        mission.suggester &&\r\n                        mission.suggester._id === user._id &&\r\n                        mission.passed !== undefined\r\n                          ? !mission.suggestedUsers.find(\r\n                              (missionUser: User) => {\r\n                                return missionUser._id === user._id;\r\n                              }\r\n                            )\r\n                            ? \"bg-warning\"\r\n                            : mission.passed\r\n                            ? \"bg-success\"\r\n                            : \"bg-danger\"\r\n                          : mission.suggestedUsers.find((missionUser: User) => {\r\n                              return missionUser._id === user._id;\r\n                            })\r\n                          ? mission.passed === undefined\r\n                            ? \"bg-secondary\"\r\n                            : mission.passed\r\n                            ? \"bg-secondary\"\r\n                            : \"bg-secondary\"\r\n                          : selectedUsers?.find((missionUser: User) => {\r\n                              return missionUser._id === user._id;\r\n                            }) && j === onMission\r\n                          ? \"bg-info\"\r\n                          : \"\"\r\n                      }\r\n                      onClick={() =>\r\n                        handleSelectUser(user, mission.data.numOfPlayers)\r\n                      }\r\n                    >\r\n                      {!(mission && j <= onMission) ? (\r\n                        j === onMission && <FaQuestion />\r\n                      ) : (\r\n                        <>\r\n                          {mission.voteData?.userVotes?.find(\r\n                            (userVote: UserVote) => {\r\n                              return userVote.user._id === user._id;\r\n                            }\r\n                          )?.passed === undefined ? (\r\n                            <FaQuestion />\r\n                          ) : mission.voteData.userVotes.length !==\r\n                            game.totalPlayers ? (\r\n                            <FaQuestion />\r\n                          ) : mission.voteData?.userVotes?.find(\r\n                              (userVote: UserVote) => {\r\n                                return userVote.user._id === user._id;\r\n                              }\r\n                            )?.passed ? (\r\n                            <FaCheck\r\n                              style={{\r\n                                color:\r\n                                  mission.passed === undefined\r\n                                    ? \"green\"\r\n                                    : mission.passed\r\n                                    ? \"green\"\r\n                                    : \"red\",\r\n                              }}\r\n                            />\r\n                          ) : (\r\n                            <FaTimes\r\n                              style={{\r\n                                color:\r\n                                  mission.passed === undefined\r\n                                    ? \"red\"\r\n                                    : !mission.passed\r\n                                    ? \"green\"\r\n                                    : \"red\",\r\n                              }}\r\n                            />\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td># of players</td>\r\n                {loadedMissions.map((mission: Mission, j: number) => (\r\n                  <td key={\"suggestedMissionsNumOfPlayers:\" + j}>\r\n                    {mission.data.numOfPlayers}\r\n                    {mission.data.numOfFails > 1 && \"!\"}\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            </tfoot>\r\n          </Table>\r\n        </Col>\r\n      </Row>\r\n      {game.missionData.state === MissionState.Suggesting && (\r\n        <Row>\r\n          <Col>\r\n            <Button variant=\"primary\" onClick={() => handleSuggest()}>\r\n              Suggest\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n      {game.missionData.state === MissionState.Voting && !hasVoted && (\r\n        <Row>\r\n          <Col>\r\n            <FaThumbsUp\r\n              style={{ color: \"green\" }}\r\n              onClick={() => handleVote(true)}\r\n            />\r\n          </Col>\r\n          <Col>\r\n            <FaThumbsDown\r\n              style={{ color: \"red\" }}\r\n              onClick={() => handleVote(false)}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      )}\r\n      {game.missionData.state === MissionState.onMission &&\r\n        !hasPassed &&\r\n        areSuggested && (\r\n          <Row>\r\n            <Col>\r\n              <FaCheck\r\n                style={{ color: \"green\" }}\r\n                onClick={() => {\r\n                  handlePass(true);\r\n                }}\r\n              />\r\n            </Col>\r\n            <Col>\r\n              <FaTimes\r\n                style={{ color: \"red\" }}\r\n                onClick={() => {\r\n                  handlePass(false);\r\n                }}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SuggestedMissions;\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { Alert, Card, CloseButton, Col, Row, Table } from \"react-bootstrap\";\r\nimport { FaCheck, FaQuestion, FaTimes } from \"react-icons/fa\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { MissionState } from \"../../interfaces/Game\";\r\nimport Mission from \"../../interfaces/Mission\";\r\nimport User from \"../../interfaces/User\";\r\nimport GameContext from \"../context/GameContext\";\r\nimport socket from \"../context/socket\";\r\nimport Links from \"../Links\";\r\nimport SuggestedMissions from \"./SuggestedMissions\";\r\n\r\nconst GameView = () => {\r\n  const game = useContext(GameContext);\r\n\r\n  const [passedMissions, setPassedMissions] = useState<Mission[]>([]);\r\n  const [loadedMission, setLoadedMission] = useState<number>(-1);\r\n  const [selectedUsers, setSelectedUsers] = useState<User[]>([]);\r\n  const [lastOnMission, setLastOnMission] = useState<[number, number]>([0, 0]);\r\n  const [onMission, setOnMission] = useState<number>(0);\r\n  const [error, setError] = useState<string>();\r\n  const [canSuggest, setCanSuggest] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    const setData = async () => {\r\n      //set passed missions\r\n      if (game.missions.length) {\r\n        const passedMissionsTemp: Mission[] = [];\r\n        game.missions.forEach((missionArray, i) => {\r\n          passedMissionsTemp.push(missionArray[missionArray.length - 1]);\r\n        });\r\n        setPassedMissions(passedMissionsTemp);\r\n\r\n        const mission =\r\n          loadedMission === -1\r\n            ? game.missions[game.missionData.onMission][\r\n                game.missions[game.missionData.onMission].length - 1\r\n              ]\r\n            : game.missions[loadedMission][\r\n                game.missions[loadedMission].length - 1\r\n              ];\r\n        if (game.missionData.state === MissionState.Voting) {\r\n          setSelectedUsers(mission.suggestedUsers);\r\n        }\r\n        //if new mission\r\n        if (\r\n          lastOnMission[0] !== game.missionData.onMission ||\r\n          lastOnMission[1] !== game.missions[game.missionData.onMission].length\r\n        ) {\r\n          setSelectedUsers([]);\r\n          setLoadedMission(game.missionData.onMission);\r\n          setOnMission(game.missions[game.missionData.onMission].length - 1);\r\n          setCanSuggest(true);\r\n          setLastOnMission([\r\n            game.missionData.onMission,\r\n            game.missions[game.missionData.onMission].length,\r\n          ] as [number, number]);\r\n        }\r\n      }\r\n    };\r\n    //run fetch data\r\n    setData();\r\n  }, [\r\n    game.missionData.onMission,\r\n    game.missionData.state,\r\n    game.missions,\r\n    lastOnMission,\r\n    loadedMission,\r\n  ]);\r\n\r\n  function handleVote(vote: boolean) {\r\n    console.log(\"user-vote\");\r\n    socket.emit(\"user-vote\", vote);\r\n  }\r\n  function handleSuggest() {\r\n    console.log(\"user-suggest\");\r\n    const mission =\r\n      game.missions[game.missionData.onMission][\r\n        game.missions[game.missionData.onMission].length - 1\r\n      ];\r\n    if (selectedUsers.length === mission.data.numOfPlayers) {\r\n      socket.emit(\"user-suggest\", selectedUsers);\r\n      setSelectedUsers([]);\r\n    } else {\r\n      setError(\"You must select the correct number of users\");\r\n    }\r\n  }\r\n  function handleSuccess(success: boolean) {\r\n    console.log(\"user-passed\");\r\n    socket.emit(\"user-passed\", success);\r\n  }\r\n\r\n  if (game.hasStarted === false) {\r\n    return <Redirect to={Links.Lobby} />;\r\n  }\r\n\r\n  if (game.missionData.result !== undefined) {\r\n    return <Redirect to={Links.Merlin} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {error && (\r\n        <Row\r\n          onClick={() => {\r\n            setError(undefined);\r\n          }}\r\n        >\r\n          <Col>\r\n            <Alert variant={\"danger\"}>\r\n              {error}\r\n              <hr />\r\n              <CloseButton />\r\n            </Alert>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n      <Row>\r\n        <Col>\r\n          <Card\r\n            bg={loadedMission === -1 ? \"primary\" : \"light\"}\r\n            onClick={() => {\r\n              setLoadedMission(-1);\r\n              setOnMission(game.missionData.onMission);\r\n              setCanSuggest(true);\r\n            }}\r\n          >\r\n            <Card.Body>Passed Missions</Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <Table>\r\n            <tbody>\r\n              <tr>\r\n                {game.missions.map((mission, i) => (\r\n                  <td key={\"mission: \" + i}>\r\n                    <Card\r\n                      bg={loadedMission === i ? \"primary\" : \"light\"}\r\n                      onClick={() => {\r\n                        setLoadedMission(i);\r\n                        if (i === game.missionData.onMission) {\r\n                          setOnMission(game.missions[i].length - 1);\r\n                          setCanSuggest(true);\r\n                        } else {\r\n                          setOnMission(game.missions[i].length - 1);\r\n                          setCanSuggest(false);\r\n                        }\r\n                      }}\r\n                    >\r\n                      <Card.Body>\r\n                        {mission[mission.length - 1].passed === undefined ? (\r\n                          <FaQuestion />\r\n                        ) : mission[mission.length - 1].passed ? (\r\n                          <FaCheck style={{ color: \"green\" }} />\r\n                        ) : (\r\n                          <FaTimes style={{ color: \"red\" }} />\r\n                        )}\r\n                      </Card.Body>\r\n                    </Card>\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            </tbody>\r\n          </Table>\r\n        </Col>\r\n      </Row>\r\n      {passedMissions.length > 0 && (\r\n        <SuggestedMissions\r\n          loadedMissions={\r\n            loadedMission === -1 ? passedMissions : game.missions[loadedMission]\r\n          }\r\n          selectedUsers={selectedUsers}\r\n          setSelectedUsers={setSelectedUsers}\r\n          handleSuggest={handleSuggest}\r\n          handleVote={handleVote}\r\n          handlePass={handleSuccess}\r\n          onMission={onMission}\r\n          canSuggest={canSuggest}\r\n        ></SuggestedMissions>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameView;\r\n","import { useState } from \"react\";\r\nimport { Button, Col, FormControl, InputGroup, Row } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport Links from \"../Links\";\r\n\r\nconst Join = () => {\r\n  const [ope, setOpe] = useState(localStorage.getItem(\"ope\"));\r\n\r\n  function storeOpe(ope: string) {\r\n    localStorage.setItem(\"ope\", ope);\r\n    setOpe(ope);\r\n  }\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <p>\r\n            Your O.P.E. is any code you choose, just make sure everyone chooses\r\n            the same O.P.E.\r\n          </p>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <InputGroup>\r\n            <FormControl\r\n              placeholder={ope ? ope : \"O.P.E.\"}\r\n              onChange={(event) => {\r\n                storeOpe(event.target.value);\r\n              }}\r\n            />\r\n            <LinkContainer to={Links.Lobby}>\r\n              <Button>Submit</Button>\r\n            </LinkContainer>\r\n          </InputGroup>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Join;\r\n","import { Card, Col } from \"react-bootstrap\";\r\nimport User from \"../interfaces/User\";\r\n\r\ntype LobbyNameListProps = {\r\n  users: User[];\r\n};\r\n\r\nconst LobbyNameList = (props: LobbyNameListProps) => {\r\n  return (\r\n    <>\r\n      {props.users.map((user, i) => (\r\n        <Col xs={6} key={\"user:\" + i}>\r\n          <Card bg=\"secondary\" text=\"light\" className=\"mt-1\">\r\n            <Card.Body>{user.username}</Card.Body>\r\n          </Card>\r\n        </Col>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LobbyNameList;\r\n","import { useEffect, useState, useContext } from \"react\";\r\nimport { Alert, Button, Col, Row, Spinner } from \"react-bootstrap\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport GameContext from \"../context/GameContext\";\r\nimport socket, { tryConnect } from \"../context/socket\";\r\nimport Links from \"../Links\";\r\nimport LobbyNameList from \"../LobbyNameList\";\r\n\r\nconst Lobby = () => {\r\n  const game = useContext(GameContext);\r\n  const settingsHaveBeenUpdated = sessionStorage.getItem(\r\n    \"settingsHaveBeenUpdated\"\r\n  );\r\n  const [redirectToSettings, setRedirectToSettings] = useState<boolean>(false);\r\n  const [redirectToGame, setRedirectToGame] = useState<boolean>(false);\r\n  const [error, setError] = useState<string>();\r\n  useEffect(() => {\r\n    tryConnect();\r\n\r\n    function checkLobby() {\r\n      if (game?.users.length === 1 && !settingsHaveBeenUpdated) {\r\n        sessionStorage.setItem(\"settingsHaveBeenUpdated\", \"true\");\r\n        setRedirectToSettings(true);\r\n      } else {\r\n        sessionStorage.setItem(\"settingsHaveBeenUpdated\", \"true\");\r\n      }\r\n    }\r\n    checkLobby();\r\n  }, [game?.users.length, settingsHaveBeenUpdated]);\r\n\r\n  if (!localStorage.getItem(\"username\")) {\r\n    return <Redirect to={Links.Login} />;\r\n  }\r\n  if (redirectToSettings) {\r\n    return <Redirect to={Links.Settings} />;\r\n  }\r\n  if (redirectToGame) {\r\n    return <Redirect to={Links.Role} />;\r\n  }\r\n  function restartGame() {\r\n    socket.emit(\"restart-game\");\r\n  }\r\n  function startGame() {\r\n    if (!game?.totalPlayers) {\r\n      setError(\"You need to update the settings first\");\r\n      return;\r\n    }\r\n    console.group(\"number of users\");\r\n    console.groupEnd();\r\n\r\n    if (game && game.users.length === game.totalPlayers) {\r\n      socket.emit(\"start-game\");\r\n      setRedirectToGame(true);\r\n    } else {\r\n      setError(\"You need to have the correct number of players\");\r\n    }\r\n  }\r\n  const loadedLobby = () => {\r\n    return (\r\n      <>\r\n        {game.hasStarted ? (\r\n          <Row>\r\n            <Col>\r\n              The Game has started\r\n              <br />\r\n              <Button variant=\"danger\" onClick={restartGame}>\r\n                Click here to restart game\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {error && (\r\n          <Row\r\n            onClick={() => {\r\n              setError(undefined);\r\n            }}\r\n          >\r\n            <Col>\r\n              <Alert variant={\"danger\"}>{error}</Alert>\r\n            </Col>\r\n          </Row>\r\n        )}\r\n        <Row>\r\n          <Col>\r\n            <h1>OPE: {game && game.ope ? game.ope : 0}</h1>\r\n          </Col>\r\n        </Row>\r\n        <br />\r\n        <Row>\r\n          <Col>\r\n            <h1>\r\n              {game.users ? game.users.length : 0}/\r\n              {game.totalPlayers ? game.totalPlayers : \"?\"} Players\r\n            </h1>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          {game && game.users && game.users.length > 0 && (\r\n            <LobbyNameList users={game.users}></LobbyNameList>\r\n          )}\r\n        </Row>\r\n        <Row className=\"mt-3\">\r\n          <Col>\r\n            <Button variant=\"outline-success\" onClick={startGame}>\r\n              Start Game\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {game ? (\r\n        loadedLobby()\r\n      ) : (\r\n        <span>\r\n          <Spinner animation=\"grow\" variant=\"primary\" />\r\n        </span>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Lobby;\r\n","import { useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { reconnect } from \"../context/socket\";\r\nimport Links from \"../Links\";\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState(localStorage.getItem(\"username\"));\r\n  const [ope, setOpe] = useState(localStorage.getItem(\"ope\"));\r\n  const [redirect, setRedirect] = useState(false);\r\n  function storeUsername(username: string) {\r\n    localStorage.setItem(\"username\", username);\r\n    setUsername(username);\r\n  }\r\n  function storeOpe(ope: string) {\r\n    localStorage.setItem(\"ope\", ope);\r\n    sessionStorage.removeItem(\"settingsHaveBeenUpdated\");\r\n    reconnect();\r\n    setOpe(ope);\r\n  }\r\n  if (redirect) {\r\n    return <Redirect to={Links.Lobby} />;\r\n  }\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <Form>\r\n            <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n              <Form.Label>Username</Form.Label>\r\n              <Form.Control\r\n                value={username ? username : \"\"}\r\n                placeholder={username ? username : \"\"}\r\n                onChange={(event) => {\r\n                  storeUsername(event.target.value);\r\n                }}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n              <Form.Label>OPE</Form.Label>\r\n              <Form.Control\r\n                placeholder={ope ? ope : \"O.P.E.\"}\r\n                value={ope ? ope : \"\"}\r\n                onChange={(event) => {\r\n                  storeOpe(event.target.value);\r\n                }}\r\n              />\r\n            </Form.Group>\r\n            <Button variant=\"primary\" onClick={() => setRedirect(true)}>\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { Button, Card, Col, Row } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { getKnownRoles } from \"../../interfaces/Roles\";\r\nimport User from \"../../interfaces/User\";\r\nimport GameContext from \"../context/GameContext\";\r\nimport { getUsername, tryConnect } from \"../context/socket\";\r\nimport Links from \"../Links\";\r\n\r\nconst Role = () => {\r\n  const game = useContext(GameContext);\r\n\r\n  const [knownUsers, setKnownUsers] = useState<User[]>();\r\n\r\n  useEffect(() => {\r\n    tryConnect();\r\n\r\n    function updateLobby() {\r\n      game.users.forEach((user: User) => {\r\n        if (user._id === getUsername()) {\r\n          setKnownUsers(getKnownRoles(user, game.users));\r\n        }\r\n      });\r\n    }\r\n    updateLobby();\r\n  }, [game.users]);\r\n\r\n  return (\r\n    <div>\r\n      <h4>\r\n        Your Role is{\" \"}\r\n        {game.users.find((user: User) => user._id === getUsername())?.role}\r\n      </h4>\r\n      <Row>\r\n        {knownUsers &&\r\n          knownUsers.map((user, i) => (\r\n            <Col xs={6} key={\"user:\" + user._id}>\r\n              <Card bg=\"secondary\" text=\"light\" className=\"mt-1\">\r\n                <Card.Body>\r\n                  {user.username}\r\n                  {\": \"}\r\n                  {user.role}\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          ))}\r\n      </Row>\r\n      <Row className=\"mt-3\">\r\n        <Col>\r\n          <LinkContainer to={Links.Game}>\r\n            <Button>Start Game</Button>\r\n          </LinkContainer>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Role;\r\n","import { useContext } from \"react\";\r\nimport { Button, ButtonGroup, Row } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport Roles from \"../../interfaces/Roles\";\r\nimport GameContext from \"../context/GameContext\";\r\nimport socket from \"../context/socket\";\r\nimport Links from \"../Links\";\r\n\r\nconst Settings = () => {\r\n  const game = useContext(GameContext);\r\n  const totalPlayersArray: number[] = [5, 6, 7, 8, 9, 10];\r\n  const RolesArray: Roles[] = [\r\n    Roles.Merlin,\r\n    Roles.Percival,\r\n    Roles.Assassin,\r\n    Roles.Morgana,\r\n  ];\r\n  function setTotalPlayers(count: number) {\r\n    game.totalPlayers = count;\r\n    socket.emit(\"update-game\", game);\r\n  }\r\n\r\n  function setRole(role: Roles) {\r\n    if (game.roles.includes(role)) {\r\n      game.roles = game.roles.filter((roleFilter) => {\r\n        return roleFilter !== role;\r\n      });\r\n    } else {\r\n      game.roles.push(role);\r\n    }\r\n    socket.emit(\"update-game\", game);\r\n  }\r\n  return (\r\n    <div>\r\n      <br />\r\n      <Row>\r\n        <p>Which characters would you like to play with?</p>\r\n        <ButtonGroup>\r\n          {RolesArray.map((role: Roles) => (\r\n            <Button\r\n              key={role}\r\n              variant={game.roles.includes(role) ? \"primary\" : \"secondary\"}\r\n              onClick={() => setRole(role)}\r\n            >\r\n              {role}\r\n            </Button>\r\n          ))}\r\n        </ButtonGroup>\r\n      </Row>\r\n      <br />\r\n      <Row>\r\n        <p>How many players are there?</p>\r\n        <ButtonGroup>\r\n          {totalPlayersArray.map((totalPlayer, index) => (\r\n            <Button\r\n              key={totalPlayer}\r\n              variant={\r\n                game.totalPlayers === totalPlayer ? \"primary\" : \"secondary\"\r\n              }\r\n              onClick={() => setTotalPlayers(totalPlayer)}\r\n            >\r\n              {totalPlayer}\r\n            </Button>\r\n          ))}\r\n        </ButtonGroup>\r\n      </Row>\r\n      <br />\r\n      <Row>\r\n        <LinkContainer to={Links.Lobby}>\r\n          <Button variant=\"success\">To Lobby</Button>\r\n        </LinkContainer>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import Button from \"react-bootstrap/Button\";\r\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport Links from \"../Links\";\r\n\r\nconst Welcome = () => {\r\n  const ope = localStorage.getItem(\"ope\");\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>\r\n          <h4>Welcome to the Game of Avalon</h4>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <ButtonGroup>\r\n          <LinkContainer to={ope ? Links.Lobby : Links.Login}>\r\n            <Button variant=\"primary\">Join Game</Button>\r\n          </LinkContainer>\r\n          <LinkContainer to={Links.About}>\r\n            <Button variant=\"outline-primary\">About</Button>\r\n          </LinkContainer>\r\n        </ButtonGroup>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Welcome;\r\n","import { useContext } from \"react\";\r\nimport { Button, Col, Row } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport GameContext from \"../context/GameContext\";\r\nimport { getUsername } from \"../context/socket\";\r\nimport Links from \"../Links\";\r\nconst ResultView = () => {\r\n  const game = useContext(GameContext);\r\n\r\n  const isGood = game.users.find((user, i) => {\r\n    return user._id === getUsername();\r\n  })?.isGood;\r\n  const result = game.result && isGood;\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col>{result ? \"you win\" : \"you lose\"}</Col>\r\n      </Row>\r\n      <br />\r\n      <Row>\r\n        <Col>\r\n          <LinkContainer to={Links.Lobby}>\r\n            <Button variant=\"primary\">Back to Lobby</Button>\r\n          </LinkContainer>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResultView;\r\n","import { useContext, useState } from \"react\";\r\nimport { Button, Card, Col } from \"react-bootstrap\";\r\nimport Row from \"react-bootstrap/esm/Row\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Roles from \"../interfaces/Roles\";\r\nimport User from \"../interfaces/User\";\r\nimport GameContext from \"./context/GameContext\";\r\nimport socket, { getUsername } from \"./context/socket\";\r\nimport Links from \"./Links\";\r\n\r\nconst Welcome = () => {\r\n  const [selectedUser, setSelectedUser] = useState<User>();\r\n  const game = useContext(GameContext);\r\n\r\n  console.log(game);\r\n\r\n  if (game.result !== undefined) {\r\n    return <Redirect to={Links.Result}></Redirect>;\r\n  }\r\n\r\n  const isAssassin =\r\n    game.users.find((user, i) => {\r\n      return user._id === getUsername();\r\n    })?.role === Roles.Assassin;\r\n\r\n  let goodUsers = game.users.filter((user, i) => {\r\n    return user.isGood;\r\n  });\r\n\r\n  function guessUser() {\r\n    socket.emit(\"user-guess\", selectedUser);\r\n  }\r\n  if (game.hasStarted === false) {\r\n    return <Redirect to={Links.Result} />;\r\n  }\r\n  return (\r\n    <>\r\n      {!isAssassin ? (\r\n        <Row>\r\n          <Col>The Assassin is guessing Merlin</Col>\r\n        </Row>\r\n      ) : (\r\n        <>\r\n          <Row>\r\n            {goodUsers.map((user, i) => (\r\n              <Col xs={6} key={\"user:\" + i}>\r\n                <Card\r\n                  bg={user._id === selectedUser?._id ? \"primary\" : \"secondary\"}\r\n                  text=\"light\"\r\n                  className=\"mt-1\"\r\n                  onClick={() => {\r\n                    setSelectedUser(user);\r\n                  }}\r\n                >\r\n                  <Card.Body>{user.username}</Card.Body>\r\n                </Card>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n          <br />\r\n          <Row>\r\n            <Col>\r\n              <Button\r\n                onClick={() => {\r\n                  guessUser();\r\n                }}\r\n              >\r\n                guess merlin\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Welcome;\r\n","import React, { useState } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport Links from \"./components/Links\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport About from \"./components/views/About\";\r\nimport GameView from \"./components/views/GameView\";\r\nimport Join from \"./components/views/Join\";\r\nimport Lobby from \"./components/views/Lobby\";\r\nimport Login from \"./components/views/Login\";\r\nimport Role from \"./components/views/Role\";\r\nimport Settings from \"./components/views/Settings\";\r\nimport Welcome from \"./components/views/Welcome\";\r\nimport GameContext from \"./components/context/GameContext\";\r\nimport Game, { MissionState } from \"./interfaces/Game\";\r\nimport socket from \"./components/context/socket\";\r\nimport Roles from \"./interfaces/Roles\";\r\nimport ResultView from \"./components/views/ResultView\";\r\nimport Merlin from \"./components/Merlin\";\r\n\r\nfunction App() {\r\n  const [game, setGame] = useState<Game>({\r\n    ope: \"\",\r\n    users: [],\r\n    totalPlayers: 0,\r\n    roles: [Roles.Merlin, Roles.Percival, Roles.Assassin, Roles.Morgana],\r\n    missions: [],\r\n    missionData: {\r\n      state: MissionState.Suggesting,\r\n      onMission: 0,\r\n      passedMissions: 0,\r\n      failedMissions: 0,\r\n    },\r\n    hasStarted: false,\r\n  } as Game);\r\n  socket.on(\"update-game\", (game: Game) => {\r\n    setGame(game);\r\n  });\r\n\r\n  return (\r\n    <Router>\r\n      <Route path=\"/avalonNew\" component={Navbar}></Route>\r\n      <Container fluid className=\"App justify-content-center text-center\">\r\n        <Route exact path={Links.Welcome} component={Welcome}></Route>\r\n        <Route exact path={Links.Join} component={Join}></Route>\r\n        <Route exact path={Links.Login} component={Login}></Route>\r\n        <Route exact path={Links.About} component={About}></Route>\r\n        <GameContext.Provider value={game}>\r\n          <Route exact path={Links.Settings} component={Settings}></Route>\r\n          <Route exact path={Links.Lobby} component={Lobby}></Route>\r\n          <Route exact path={Links.Role} component={Role}></Route>\r\n          <Route exact path={Links.Game} component={GameView}></Route>\r\n          <Route exact path={Links.Merlin} component={Merlin}></Route>\r\n          <Route exact path={Links.Result} component={ResultView}></Route>\r\n        </GameContext.Provider>\r\n      </Container>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./index.css\";\n\n// Importing the Bootstrap CSS\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}